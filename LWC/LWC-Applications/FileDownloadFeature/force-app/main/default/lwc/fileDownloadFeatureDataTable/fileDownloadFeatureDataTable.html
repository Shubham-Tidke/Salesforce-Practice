<!-- sldsValidatorIgnore -->
<template>   
    <lightning-card title="Download Attachments Component"> 
        <template if:false={count}>
            <div class="slds-m-around_medium">
                <h2>No files to download!!</h2>
            </div>
        </template>
        <template if:true={count}> 
            <div class="slds-m-around_x-small">
               
                <lightning-input
                    class = "slds-float_right" 
                    type="search" 
                    placeholder="Search File" 
                    style="width: 150px;" 
                    onchange={handleSearch}>
                </lightning-input>
                <br><lightning-button-icon  
                label="Refresh" 
                class = "slds-float_right slds-p-horizontal_xx-small" 
                icon-name="utility:refresh" 
                alternative-text="Refresh table"  
                onclick={refreshHandler}>
            </lightning-button-icon>
                <lightning-file-upload
                    name="fileUploader"
                    class = "slds-float_left slds-p-bottom_x-small" 
                    record-id={recordId}
                    title="Click to upload files"
                    onuploadfinished={handleUploadFinished}
                    multiple>
                </lightning-file-upload><br>
                <lightning-button   
                    label="Delete Files"  
                    class="slds-p-horizontal_xx-small"
                    variant="destructive" 
                    icon-name="utility:delete" 
                    title="Delete selected files"  
                    style="width: 200px;"
                    onclick={checkboxHandler}>
                </lightning-button>
                          
                <lightning-button  
                    label="Download Files"  
                    variant="brand" 
                    icon-name="utility:download" 
                    title="Download selected files"  
                    style="width: fit-content;"
                    onclick={checkboxHandler}>
                </lightning-button>                 
            </div> 
            <template if:false={isSpinner}>              
            <div class="slds-box" style="height:275px;">
                <lightning-datatable  
                    key-field="Id"  
                    data={filesList}  
                    columns={columns}                                      
                    onrowaction={handleRowAction}
                    enable-infinite-loading
                    show-row-number-column>  
                </lightning-datatable>  
              </div>
            </template>
            <template if:true={isSpinner}>
                <lightning-spinner alternative-text="Loading" size="medium">

                </lightning-spinner>
            </template> 
        </template>
    </lightning-card>
</template>